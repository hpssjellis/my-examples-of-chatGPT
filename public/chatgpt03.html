<!DOCTYPE html>
<html>
<head>
  <title>WebCam Image Save V4</title>
</head>
<body>
  <h1>WebCam Image Save</h1>
  <button id="captureBtn">Capture Image</button>
  <br><br>
  <button id="viewBtn">View Images in Local Storage</button>
  <br><br>
  <video id="myVideo" width="400" height="300" autoplay></video>
  <canvas id="myCanvas"></canvas>
  <script>
    // get video and canvas elements
    const myVideo = document.getElementById('myVideo');
    const myCanvas = document.getElementById('myCanvas');

// get capture and view buttons
const myCaptureBtn = document.getElementById('captureBtn');
const myViewBtn = document.getElementById('viewBtn');

// get current date
const myDate = new Date();

// get access to user's webcam
navigator.mediaDevices.getUserMedia({video: true})
  .then(stream => {
    myVideo.srcObject = stream;
  });

// capture image from webcam
myCaptureBtn.addEventListener('click', function() {
  // draw video frame on canvas
  myCanvas.getContext('2d').drawImage(myVideo, 0, 0, 400, 300);
  // convert canvas to png image
  const myImageData = myCanvas.toDataURL("image/png");
  // save image to localStorage with date as filename
  localStorage.setItem(myDate, myImageData);
});

// view images in localStorage
myViewBtn.addEventListener('click', function() {
  // loop through localStorage items
  for (let i = 0; i < localStorage.length; i++) {
    // get item key (filename) and value (image data)
    const myImageName = localStorage.key(i);
    const myImageData = localStorage.getItem(myImageName);
    // create img element and set src to image data
    const myImg = document.createElement('img');
    myImg.src = myImageData;
    // add img element to body
    document.body.appendChild(myImg);
  }
});
  </script>
</body>
</html>
