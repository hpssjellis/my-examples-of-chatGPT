<!DOCTYPE html>
<html>
<head>
<title>Webcam Image Capture and Save</title>
</head>
<body>
<h1>Webcam Image Capture and Save</h1>
<div id="myWebcam"></div>
<canvas id="myCanvas"></canvas>
<button onclick="myCaptureWebcam()">Capture Webcam Image</button>

<script>
const myWebcam = document.getElementById('myWebcam');
const myCanvas = document.getElementById('myCanvas');

const myMediaStream = null;
const myMediaTrack = null;

function myCaptureWebcam() {
  // get media stream
  navigator.mediaDevices.getUserMedia({ video: true })
  .then((myMediaStream) => {
    // show webcam video on screen
    myWebcam.srcObject = myMediaStream;
    myWebcam.play();

    // get media track from stream
    myMediaTrack = myMediaStream.getVideoTracks()[0];
  })
  .catch((error) => {
    console.log('Error:', error);
  });

  // capture image from webcam on canvas
  myCanvas.getContext('2d').drawImage(myWebcam, 0, 0);

  // save canvas image to localstorage as PNG in base64 format
  const myDate = new Date();
  const myLocalStorageKey = myDate.toISOString();
  const myImageData = myCanvas.toDataURL('image/png');
  localStorage.setItem(myLocalStorageKey, myImageData);
  console.log('Image saved to localstorage with key:', myLocalStorageKey);

  // stop webcam video
  myMediaTrack.stop();
}
</script>
</body>
</html>
